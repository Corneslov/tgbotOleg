<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–ø—Ä–æ—Å–Ω–∏–∫ –ù–æ—Ä–º–∞</title>
    <script src="https://telegram.org/js/telegram-web-app.js?1"></script>
    <style>
        body {
            color: #000000;
            background: linear-gradient(135deg, #C8DFE9 0%, #A8C4D4 100%);
            padding: 20px;
            font-family: Arial, sans-serif;
            font-size: 18px;
            max-width: 600px;
            margin: 0 auto;
            min-height: 100vh;
        }
        .container {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }
        .step { display: none; }
        .step.active { display: block; }
        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--tg-theme-hint-color);
            border-radius: 5px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .progress {
            height: 100%;
            background: linear-gradient(90deg, #2D6A4F 0%, #1B5E3F 100%);
            border-radius: 5px;
            transition: width 0.3s ease;
        }
        .question-title {
            font-size: 22px;
            font-weight: bold;
            margin-bottom: 15px;
            color: #000000;
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.5);
        }
        .input-group { margin-bottom: 15px; }
        .input-group label {
            display: block;
            margin-bottom: 8px;
            color: #000000;
            font-weight: 500;
            font-size: 16px;
        }
        input, textarea, select {
            width: 100%;
            padding: 12px;
            border: 1px solid rgba(0, 0, 0, 0.3);
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.7);
            color: #000000;
            box-sizing: border-box;
            transition: all 0.3s ease;
            font-size: 16px;
        }
        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: #4299e1;
            box-shadow: 0 0 0 3px rgba(66, 153, 225, 0.2);
        }
        textarea {
            min-height: 120px;
            resize: vertical;
            font-size: 16px;
        }
        .button-group {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        button {
            background: linear-gradient(135deg, #2D6A4F 0%, #1B5E3F 100%);
            color: #ffffff;
            border: none;
            padding: 12px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(45, 106, 79, 0.3);
            font-size: 16px;
        }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(45, 106, 79, 0.4);
        }
        button:disabled {
            background: rgba(255, 255, 255, 0.1);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        .secondary-btn {
            background: rgba(255, 255, 255, 0.3);
            color: #000000;
            border: 1px solid rgba(0, 0, 0, 0.2);
        }
        .secondary-btn:hover {
            background: rgba(255, 255, 255, 0.4);
            border-color: rgba(0, 0, 0, 0.3);
        }
        .step-indicator {
            text-align: center;
            margin-bottom: 15px;
            color: #000000;
            font-weight: 500;
            font-size: 18px;
        }
        h1 {
            color: #000000;
            text-align: center;
            margin-bottom: 30px;
            text-shadow: 0 1px 3px rgba(255, 255, 255, 0.7);
            font-size: 28px;
        }
    </style>
</head>
<body>
    <h1>–û–ø—Ä–æ—Å–Ω–∏–∫ –ø–æ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–∞–º</h1>

    <div class="progress-bar">
        <div class="progress" id="progress"></div>
    </div>

    <div class="step-indicator" id="stepIndicator">–®–∞–≥ 1 –∏–∑ 12</div>

    <div class="container">
        <!-- –®–∞–≥ 1: –ü—Ä–æ–±–ª–µ–º–∞ -->
        <div class="step active" id="step1">
            <div class="question-title">–ü—Ä–æ–±–ª–µ–º–∞</div>
            <div class="input-group">
                <label for="problem">–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É:</label>
                <textarea id="problem" placeholder="–û–ø–∏—à–∏—Ç–µ –ø—Ä–æ–±–ª–µ–º—É, —Å –∫–æ—Ç–æ—Ä–æ–π —Å—Ç–æ–ª–∫–Ω—É–ª–∏—Å—å..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 2: –ò—Å—Ç–∏–Ω–Ω–∞—è —Ü–µ–ª—å -->
        <div class="step" id="step2">
            <div class="question-title">–ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ –∏—Å—Ç–∏–Ω–Ω–∞—è —Ü–µ–ª—å?</div>
            <div class="input-group">
                <label for="trueGoal">–û–ø–∏—à–∏—Ç–µ –∏—Å—Ç–∏–Ω–Ω—É—é —Ü–µ–ª—å:</label>
                <textarea id="trueGoal" placeholder="–ö–∞–∫–æ–≤–∞ –±—ã–ª–∞ –∏—Å—Ç–∏–Ω–Ω–∞—è —Ü–µ–ª—å..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 3: –ö—Ç–æ —ç—Ç–æ –±—ã–ª -->
        <div class="step" id="step3">
            <div class="question-title">–ö—Ç–æ —ç—Ç–æ –±—ã–ª?</div>
            <div class="input-group">
                <label for="whoWasIt">–û–ø–∏—à–∏—Ç–µ, –∫—Ç–æ –±—ã–ª –≤–∞—à–∏–º –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–º:</label>
                <textarea id="whoWasIt" placeholder="–û–ø–∏—à–∏—Ç–µ, –∫—Ç–æ –±—ã–ª –≤–∞—à–∏–º –æ–ø–ø–æ–Ω–µ–Ω—Ç–æ–º..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 4: –ß—Ç–æ —è –¥—É–º–∞–ª -->
        <div class="step" id="step4">
            <div class="question-title">–ß—Ç–æ —è –¥—É–º–∞–ª?</div>
            <div class="input-group">
                <label for="thoughtAboutGoal">–ß—Ç–æ —è –¥—É–º–∞–ª –æ —Ü–µ–ª–∏?</label>
                <textarea id="thoughtAboutGoal" placeholder="–ß—Ç–æ —è –¥—É–º–∞–ª –æ —Ü–µ–ª–∏..."></textarea>
            </div>
            <div class="input-group">
                <label for="thoughtAboutSelf">–ß—Ç–æ —è –¥—É–º–∞–ª –æ —Å–µ–±–µ?</label>
                <textarea id="thoughtAboutSelf" placeholder="–ß—Ç–æ —è –¥—É–º–∞–ª –æ —Å–µ–±–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="thoughtAboutOpponent">–ß—Ç–æ —è –¥—É–º–∞–ª –æ–± –æ–ø–ø–æ–Ω–µ–Ω—Ç–µ?</label>
                <textarea id="thoughtAboutOpponent" placeholder="–ß—Ç–æ —è –¥—É–º–∞–ª –æ–± –æ–ø–ø–æ–Ω–µ–Ω—Ç–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatIAimedFor">–ö —á–µ–º—É —è —Å—Ç—Ä–µ–º–∏–ª—Å—è?</label>
                <textarea id="whatIAimedFor" placeholder="–ö —á–µ–º—É —è —Å—Ç—Ä–µ–º–∏–ª—Å—è..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatIFeared">–ß–µ–≥–æ —è –±–æ—è–ª—Å—è?</label>
                <textarea id="whatIFeared" placeholder="–ß–µ–≥–æ —è –±–æ—è–ª—Å—è..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatWasImpossible">–ß—Ç–æ –¥–ª—è –º–µ–Ω—è –±—ã–ª–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ?</label>
                <textarea id="whatWasImpossible" placeholder="–ß—Ç–æ –¥–ª—è –º–µ–Ω—è –±—ã–ª–æ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–æ..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 5: –ß—Ç–æ —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª -->
        <div class="step" id="step5">
            <div class="question-title">–ß—Ç–æ —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª –¥–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏ –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤?</div>

            <div class="input-group">
                <label>–î–æ</label>
                <div class="input-group">
                    <label for="intensityBefore">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityBefore" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingBefore">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingBefore" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>

            <div class="input-group">
                <label>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</label>
                <div class="input-group">
                    <label for="intensityDuring">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityDuring" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingDuring">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingDuring" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>

            <div class="input-group">
                <label>–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏</label>
                <div class="input-group">
                    <label for="intensityAfter">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityAfter" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingAfter">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingAfter" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>
        </div>

        <!-- –®–∞–≥ 6: –ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –Ω–µ —Ç–∞–∫ –∏ —á—Ç–æ —ç—Ç–æ –±—ã–ª–æ -->
        <div class="step" id="step6">
            <div class="question-title">–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –Ω–µ —Ç–∞–∫, –∫–∞–∫ —Ö–æ—Ç–µ–ª –∏–ª–∏ —Å–ª–µ–¥–æ–≤–∞–ª–æ?</div>
            <div class="input-group">
                <label for="wrongToSelf">–ü–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ–±–µ?</label>
                <textarea id="wrongToSelf" placeholder="–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –Ω–µ —Ç–∞–∫ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ–±–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="wrongToOpponent">–ü–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É?</label>
                <textarea id="wrongToOpponent" placeholder="–ß—Ç–æ —è —Å–¥–µ–ª–∞–ª –Ω–µ —Ç–∞–∫ –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatWasIt">–ß—Ç–æ —ç—Ç–æ –≤–æ–æ–±—â–µ –±—ã–ª–æ?</label>
                <textarea id="whatWasIt" placeholder="–ß—Ç–æ —ç—Ç–æ –≤–æ–æ–±—â–µ –±—ã–ª–æ..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 7: –ö–∞–∫–∞—è —É –º–µ–Ω—è –∑–∞–¥–∞—á–∞? -->
        <div class="step" id="step7">
            <div class="question-title">–ö–∞–∫–∞—è —É –º–µ–Ω—è –∑–∞–¥–∞—á–∞? –í —á–µ–º —Å–º—ã—Å–ª –µ–µ —Ä–µ—à–µ–Ω–∏—è?</div>
            <div class="input-group">
                <label for="taskDescription">–û–ø–∏—à–∏—Ç–µ –≤–∞—à—É –∑–∞–¥–∞—á—É:</label>
                <textarea id="taskDescription" placeholder="–ö–∞–∫–∞—è —É –º–µ–Ω—è –∑–∞–¥–∞—á–∞? –í —á–µ–º —Å–º—ã—Å–ª –µ–µ —Ä–µ—à–µ–Ω–∏—è..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 8: –ö—Ç–æ —è? -->
        <div class="step" id="step8">
            <div class="question-title">–ö—Ç–æ —è?</div>
            <div class="input-group">
                <label for="whoAmI">–û–ø–∏—à–∏—Ç–µ, –∫—Ç–æ –≤—ã –≤ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏:</label>
                <textarea id="whoAmI" placeholder="–ö—Ç–æ —è –≤ —ç—Ç–æ–π —Å–∏—Ç—É–∞—Ü–∏–∏..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 9: –ß—Ç–æ —è –¥—É–º–∞—é? -->
        <div class="step" id="step9">
            <div class="question-title">–ß—Ç–æ —è –¥—É–º–∞—é?</div>
            <div class="input-group">
                <label for="thinkAboutGoalAchievability">–ß—Ç–æ —è –¥—É–º–∞—é –æ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏ —Ü–µ–ª–∏?</label>
                <textarea id="thinkAboutGoalAchievability" placeholder="–ß—Ç–æ —è –¥—É–º–∞—é –æ –¥–æ—Å—Ç–∏–∂–∏–º–æ—Å—Ç–∏ —Ü–µ–ª–∏..."></textarea>
            </div>
            <div class="input-group">
                <label for="thinkAboutSelfNew">–ß—Ç–æ —è –¥—É–º–∞—é –æ —Å–µ–±–µ?</label>
                <textarea id="thinkAboutSelfNew" placeholder="–ß—Ç–æ —è –¥—É–º–∞—é –æ —Å–µ–±–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="thinkAboutOpponentNew">–ß—Ç–æ —è –¥—É–º–∞—é –æ–± –æ–ø–ø–æ–Ω–µ–Ω—Ç–µ?</label>
                <textarea id="thinkAboutOpponentNew" placeholder="–ß—Ç–æ —è –¥—É–º–∞—é –æ–± –æ–ø–ø–æ–Ω–µ–Ω—Ç–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatIAimForNew">–ö —á–µ–º—É —è —Å—Ç—Ä–µ–º–ª—é—Å—å?</label>
                <textarea id="whatIAimForNew" placeholder="–ö —á–µ–º—É —è —Å—Ç—Ä–µ–º–ª—é—Å—å..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatMotivatesMe">–ß—Ç–æ –º–µ–Ω—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –∏ –¥–≤–∏–≥–∞–µ—Ç?</label>
                <textarea id="whatMotivatesMe" placeholder="–ß—Ç–æ –º–µ–Ω—è –º–æ—Ç–∏–≤–∏—Ä—É–µ—Ç –∏ –¥–≤–∏–≥–∞–µ—Ç..."></textarea>
            </div>
            <div class="input-group">
                <label for="whatIsPossibleDesirable">–ß—Ç–æ –¥–ª—è –º–µ–Ω—è –≤–æ–∑–º–æ–∂–Ω–æ –∏ –∂–µ–ª–∞–Ω–Ω–æ?</label>
                <textarea id="whatIsPossibleDesirable" placeholder="–ß—Ç–æ –¥–ª—è –º–µ–Ω—è –≤–æ–∑–º–æ–∂–Ω–æ –∏ –∂–µ–ª–∞–Ω–Ω–æ..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 10: –ß—Ç–æ —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª (–†–µ—à–µ–Ω–∏–µ) -->
        <div class="step" id="step10">
            <div class="question-title">–ß—Ç–æ —è —á—É–≤—Å—Ç–≤–æ–≤–∞–ª –¥–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤?</div>

            <div class="input-group">
                <label>–î–æ</label>
                <div class="input-group">
                    <label for="intensityBeforeSolution">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityBeforeSolution" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingBeforeSolution">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingBeforeSolution" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>

            <div class="input-group">
                <label>–í –ø—Ä–æ—Ü–µ—Å—Å–µ</label>
                <div class="input-group">
                    <label for="intensityDuringSolution">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityDuringSolution" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingDuringSolution">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingDuringSolution" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>

            <div class="input-group">
                <label>–ü–æ –æ–∫–æ–Ω—á–∞–Ω–∏–∏</label>
                <div class="input-group">
                    <label for="intensityAfterSolution">–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å</label>
                    <input type="number" id="intensityAfterSolution" min="1" max="10" placeholder="1-10">
                </div>
                <div class="input-group">
                    <label for="feelingAfterSolution">–ß—É–≤—Å—Ç–≤–æ</label>
                    <input type="text" id="feelingAfterSolution" placeholder="–ö–∞–∫–æ–µ —á—É–≤—Å—Ç–≤–æ?">
                </div>
            </div>
        </div>

        <!-- –®–∞–≥ 11: –ß—Ç–æ –º–Ω–µ —Å—Ç–æ–∏—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å -->
        <div class="step" id="step11">
            <div class="question-title">–ß—Ç–æ –º–Ω–µ —Å—Ç–æ–∏—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –∏ –∫–∞–∫–æ–π –Ω–∞—Å—Ç—Ä–æ–π —Å–æ—Ö—Ä–∞–Ω—è—Ç—å –¥–æ, –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –∏ –ø–æ –æ–∫–æ–Ω—á–∞–Ω–∏—é –ø–µ—Ä–µ–≥–æ–≤–æ—Ä–æ–≤?</div>
            <div class="input-group">
                <label for="shouldFeelToSelf">–ü–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ–±–µ?</label>
                <textarea id="shouldFeelToSelf" placeholder="–ß—Ç–æ –º–Ω–µ —Å—Ç–æ–∏—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ —Å–µ–±–µ..."></textarea>
            </div>
            <div class="input-group">
                <label for="shouldFeelToOpponent">–ü–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É?</label>
                <textarea id="shouldFeelToOpponent" placeholder="–ß—Ç–æ –º–Ω–µ —Å—Ç–æ–∏—Ç —á—É–≤—Å—Ç–≤–æ–≤–∞—Ç—å –ø–æ –æ—Ç–Ω–æ—à–µ–Ω–∏—é –∫ –æ–ø–ø–æ–Ω–µ–Ω—Ç—É..."></textarea>
            </div>
        </div>

        <!-- –®–∞–≥ 12: –ß—Ç–æ —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç? -->
        <div class="step" id="step12">
            <div class="question-title">–ß—Ç–æ —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç?</div>
            <div class="input-group">
                <label for="whatWillItBeNow">–û–ø–∏—à–∏—Ç–µ, —á—Ç–æ —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç:</label>
                <textarea id="whatWillItBeNow" placeholder="–ß—Ç–æ —ç—Ç–æ —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç..."></textarea>
            </div>
        </div>

        <div class="button-group">
            <button id="prevBtn" class="secondary-btn" onclick="changeStep(-1)" disabled>–ù–∞–∑–∞–¥</button>
            <button id="nextBtn" onclick="changeStep(1)">–î–∞–ª–µ–µ</button>
        </div>
    </div>

    <script>
        let tg = window.Telegram?.WebApp;
        if (!tg) {
            document.body.innerHTML = "<div style='padding:20px;text-align:center;'><h2>–û—Ç–∫—Ä–æ–π—Ç–µ —á–µ—Ä–µ–∑ Telegram</h2></div>";
        } else {
            tg.ready();
            tg.expand();
            console.log("‚úÖ Telegram WebApp –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω:", tg);
            console.log("üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", tg.initDataUnsafe);
            
            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º MainButton –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
            tg.MainButton.setText("–û–¢–ü–†–ê–í–¨ –†–ï–ó–£–õ–¨–¢–ê–¢–´");
            tg.MainButton.color = "#48bb78";
            tg.MainButton.textColor = "#ffffff";
            tg.MainButton.hide(); // –°–∫—Ä—ã–≤–∞–µ–º –¥–æ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ —à–∞–≥–∞
            
            // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ MainButton
            tg.MainButton.onClick(submitData);
            
            console.log("‚úÖ MainButton –Ω–∞—Å—Ç—Ä–æ–µ–Ω –∏ –≥–æ—Ç–æ–≤");
        }

        let currentStep = 1;
        const totalSteps = 12;

        function updateProgress() {
            const progress = document.getElementById('progress');
            const stepIndicator = document.getElementById('stepIndicator');
            const progressPercent = (currentStep / totalSteps) * 100;

            progress.style.width = progressPercent + '%';
            stepIndicator.textContent = `–®–∞–≥ ${currentStep} –∏–∑ ${totalSteps}`;

            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');

            prevBtn.disabled = currentStep === 1;

            // –£–ø—Ä–∞–≤–ª—è–µ–º MainButton –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —à–∞–≥–µ
            if (currentStep === totalSteps) {
                nextBtn.style.display = 'none';
                if (tg && tg.MainButton) {
                    tg.MainButton.show();
                    console.log("‚úÖ MainButton –ø–æ–∫–∞–∑–∞–Ω (–ø–æ—Å–ª–µ–¥–Ω–∏–π —à–∞–≥)");
                }
            } else {
                nextBtn.style.display = 'block';
                if (tg && tg.MainButton) {
                    tg.MainButton.hide();
                }
            }
        }

        function changeStep(direction) {
            const currentStepElement = document.getElementById(`step${currentStep}`);
            currentStepElement.classList.remove('active');

            currentStep += direction;

            const newStepElement = document.getElementById(`step${currentStep}`);
            newStepElement.classList.add('active');

            updateProgress();
        }

        function collectData() {
            return {
                problem: document.getElementById('problem').value,
                trueGoal: document.getElementById('trueGoal').value,
                whoWasIt: document.getElementById('whoWasIt').value,
                thoughts: {
                    aboutGoal: document.getElementById('thoughtAboutGoal').value,
                    aboutSelf: document.getElementById('thoughtAboutSelf').value,
                    aboutOpponent: document.getElementById('thoughtAboutOpponent').value,
                    aimedFor: document.getElementById('whatIAimedFor').value,
                    feared: document.getElementById('whatIFeared').value,
                    impossible: document.getElementById('whatWasImpossible').value
                },
                feelings: {
                    before: {
                        intensity: document.getElementById('intensityBefore').value,
                        feeling: document.getElementById('feelingBefore').value
                    },
                    during: {
                        intensity: document.getElementById('intensityDuring').value,
                        feeling: document.getElementById('feelingDuring').value
                    },
                    after: {
                        intensity: document.getElementById('intensityAfter').value,
                        feeling: document.getElementById('feelingAfter').value
                    }
                },
                mistakes: {
                    toSelf: document.getElementById('wrongToSelf').value,
                    toOpponent: document.getElementById('wrongToOpponent').value
                },
                whatWasIt: document.getElementById('whatWasIt').value,
                taskDescription: document.getElementById('taskDescription').value,
                whoAmI: document.getElementById('whoAmI').value,
                solutionThoughts: {
                    aboutGoalAchievability: document.getElementById('thinkAboutGoalAchievability').value,
                    aboutSelf: document.getElementById('thinkAboutSelfNew').value,
                    aboutOpponent: document.getElementById('thinkAboutOpponentNew').value,
                    aimFor: document.getElementById('whatIAimForNew').value,
                    motivates: document.getElementById('whatMotivatesMe').value,
                    possibleDesirable: document.getElementById('whatIsPossibleDesirable').value
                },
                solutionFeelings: {
                    before: {
                        intensity: document.getElementById('intensityBeforeSolution').value,
                        feeling: document.getElementById('feelingBeforeSolution').value
                    },
                    during: {
                        intensity: document.getElementById('intensityDuringSolution').value,
                        feeling: document.getElementById('feelingDuringSolution').value
                    },
                    after: {
                        intensity: document.getElementById('intensityAfterSolution').value,
                        feeling: document.getElementById('feelingAfterSolution').value
                    }
                },
                shouldFeel: {
                    toSelf: document.getElementById('shouldFeelToSelf').value,
                    toOpponent: document.getElementById('shouldFeelToOpponent').value
                },
                whatWillItBeNow: document.getElementById('whatWillItBeNow').value
            };
        }

        function getUserData() {
            try {
                const user = tg.initDataUnsafe.user;
                if (user) {
                    return {
                        telegram_id: user.id,
                        first_name: user.first_name,
                        last_name: user.last_name || '',
                        username: user.username || ''
                    };
                }
                return null;
            } catch (error) {
                console.error("‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", error);
                return null;
            }
        }

        function submitData() {
            console.log("üîµ MainButton –Ω–∞–∂–∞—Ç - –Ω–∞—á–∏–Ω–∞–µ–º –æ—Ç–ø—Ä–∞–≤–∫—É");
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å –Ω–∞ –∫–Ω–æ–ø–∫–µ
            tg.MainButton.showProgress();
            tg.MainButton.disable();

            const data = collectData();
            console.log("üì¶ –°–æ–±—Ä–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –æ–ø—Ä–æ—Å–∞:", data);

            // –£–±—Ä–∞–ª–∏ –≤–∞–ª–∏–¥–∞—Ü–∏—é - –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–∂–µ —Å –ø—É—Å—Ç—ã–º–∏ –ø–æ–ª—è–º–∏
            console.log("‚ö†Ô∏è –û—Ç–ø—Ä–∞–≤–∫–∞ –±–µ–∑ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ (–º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –ø—É—Å—Ç—É—é —Ñ–æ—Ä–º—É)");

            const userData = getUserData();
            if (!userData) {
                console.error("‚ùå –ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è");
                tg.MainButton.hideProgress();
                tg.MainButton.enable();
                tg.showAlert("–û—à–∏–±–∫–∞: –Ω–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.");
                return;
            }

            console.log("üë§ –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:", userData);

            const payload = {
                user: userData,
                survey: {
                    id: 'survey_' + Date.now(),
                    created_at: Date.now(),
                    total_steps: totalSteps,
                    data: data
                }
            };

            let json = JSON.stringify(payload);
            console.log("üìä –†–∞–∑–º–µ—Ä JSON –¥–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:", json.length, "—Å–∏–º–≤–æ–ª–æ–≤");
            
            // Telegram WebApp –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–æ 4096 –±–∞–π—Ç
            if (json.length > 4000) {
                console.warn("‚ö†Ô∏è Payload —Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π, –æ–ø—Ç–∏–º–∏–∑–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ...");
                // –û–±—Ä–µ–∑–∞–µ–º –¥–ª–∏–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç–æ–≤—ã–µ –ø–æ–ª—è
                if (payload.survey.data.problem) {
                    payload.survey.data.problem = payload.survey.data.problem.substring(0, 300);
                }
                if (payload.survey.data.trueGoal) {
                    payload.survey.data.trueGoal = payload.survey.data.trueGoal.substring(0, 300);
                }
                json = JSON.stringify(payload);
                console.log("üìä –†–∞–∑–º–µ—Ä JSON –ø–æ—Å–ª–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:", json.length, "—Å–∏–º–≤–æ–ª–æ–≤");
            }

            console.log("üöÄ –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç —á–µ—Ä–µ–∑ tg.sendData()");
            console.log("üì§ –§–∏–Ω–∞–ª—å–Ω—ã–π payload:", payload);
            
            try {
                tg.sendData(json);
                console.log("‚úÖ tg.sendData() –≤—ã–∑–≤–∞–Ω —É—Å–ø–µ—à–Ω–æ! –î–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –≤ –±–æ—Ç.");
                
                // –î–∞—ë–º –≤—Ä–µ–º—è –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É –¥–∞–Ω–Ω—ã—Ö, –∑–∞—Ç–µ–º –∑–∞–∫—Ä—ã–≤–∞–µ–º
                setTimeout(() => {
                    console.log("üîí –ó–∞–∫—Ä—ã–≤–∞–µ–º WebApp");
                    tg.close();
                }, 500);
            } catch (error) {
                console.error("‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:", error);
                tg.MainButton.hideProgress();
                tg.MainButton.enable();
                tg.showAlert("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ –¥–∞–Ω–Ω—ã—Ö. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.");
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        updateProgress();
        console.log("‚úÖ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –ì–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ!");
    </script>
</body>
</html>
